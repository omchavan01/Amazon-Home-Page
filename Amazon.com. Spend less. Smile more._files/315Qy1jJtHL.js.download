(function(m){var n=window.AmazonUIPageJS||window.P,l=n._namespace||n.attributeErrors,k=l?l("AmazonLightsaberPageAssets",""):n;k.guardFatal?k.guardFatal(m)(k,window):k.execute(function(){m(k,window)})})(function(m,n,l){(function(){var k;(function(c){c.deep=function(a){return JSON.parse(JSON.stringify(a))}})(k||(k={}));var u;(function(c){c.log=function(a){for(var b=1;b<arguments.length;b++);}})(u||(u={}));var p;(function(c){c.isObject=function(a){return!!a&&"object"===typeof a&&!Array.isArray(a)};c.isNonEmptyString=
function(a){return"string"===typeof a&&0<a.length};c.isPositiveInteger=function(a){return"number"===typeof a&&Math.floor(a)===a&&0<=a&&Infinity!==a};c.isFunction=function(a){return"function"===typeof a}})(p||(p={}));var B=this&&this.__awaiter||function(c,a,b,d){function e(a){return a instanceof b?a:new b(function(b){b(a)})}return new (b||(b=Promise))(function(b,f){function h(a){try{w(d.next(a))}catch(x){f(x)}}function t(a){try{w(d["throw"](a))}catch(x){f(x)}}function w(a){a.done?b(a.value):e(a.value).then(h,
t)}w((d=d.apply(c,a||[])).next())})},C=this&&this.__generator||function(c,a){function b(a){return function(b){return d([a,b])}}function d(b){if(h)throw new TypeError("Generator is already executing.");for(;e;)try{if(h=1,f&&(g=b[0]&2?f["return"]:b[0]?f["throw"]||((g=f["return"])&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;if(f=0,g)b=[b[0]&2,g.value];switch(b[0]){case 0:case 1:g=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++;f=b[1];b=[0];continue;case 7:b=e.ops.pop();
e.trys.pop();continue;default:if(!(g=e.trys,g=0<g.length&&g[g.length-1])&&(6===b[0]||2===b[0])){e=0;continue}if(3===b[0]&&(!g||b[1]>g[0]&&b[1]<g[3]))e.label=b[1];else if(6===b[0]&&e.label<g[1])e.label=g[1],g=b;else if(g&&e.label<g[2])e.label=g[2],e.ops.push(b);else{g[2]&&e.ops.pop();e.trys.pop();continue}}b=a.call(c,e)}catch(A){b=[6,A],f=0}finally{h=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var e={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,f,
g,t;return t={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t},v;(function(c){var a=this;c.queueTask=function(a,d){return setTimeout(a,d||0)};c.queueTaskEvery=function(a,d){return setInterval(a,d)};c.wait=function(b){return B(a,void 0,void 0,function(){return C(this,function(a){return[2,new Promise(function(a){setTimeout(a,b)})]})})};c.queueMicrotask=function(a){Promise.resolve().then(function(){a()})}})(v||(v={}));var D=function(){function c(a){this._global=
a;var b=p.isFunction;this._unsupported=!a.ue||!b(a.ue.tag)||!b(a.ue.count)||!b(a.uet)||!b(a.uex)}c.prototype.tag=function(a){this._unsupported||(a=this._getMetricName(a),this._global.ue.tag(a),this._global.ue.isl&&this._global.uex("at"))};c.prototype.count=function(a,b){void 0===b&&(b=1);this._unsupported||(a=this._getMetricName(a),this._global.ue.count(a,b))};c.prototype.widgetLatency=function(a,b,d){b=this._getMetricName(b);"ld"===a?this._global.uex(a,b,{wb:1},d):this._global.uet(a,b,{wb:1},d)};
c.prototype._getMetricName=function(a){return(c._METRIC_PREFIX+":"+a).toLowerCase()};c._METRIC_PREFIX="Lightsaber:Page";return c}(),E={"gateway-phone-apps":"HomePage","gateway-phone-web":"HomePage",Gateway:"HomePage",SearchAW:"Search",Search:"Search",DetailWebView:"Detail",WebflowDetailWebView:"Detail",DetailAW:"Detail",WebflowDetailAW:"Detail",Detail:"Detail",WebflowDetail:"Detail",ShoppingCartWebview:"Cart",ShoppingCartAW:"Cart",ShoppingCart:"Cart",CheckoutConfirmOrderWebview:"Checkout",CheckoutConfirmOrderAW:"Checkout",
CheckoutConfirmOrder:"Checkout"},q;(function(c){c.getPageType=function(a){return a.ue_pty||"unknown"};c.getSubPageType=function(a){return a.ue_spty||"unknown"};c.getRequestId=function(a){return a.ue_id};c.getPageTypeGroup=function(a){a=c.getPageType(a);return(a=E[a])?a:"Unknown"}})(q||(q={}));var r=function(){function c(a,b,d){this.global=a;this._csmLogger=d;this._workerMessaging=b}c.prototype.mergeInto=function(a,b,d){Object.keys(b).forEach(function(c){a[c]=a[c]||{};a[c][d]=b[c]})};c.prototype.getAbsoluteUrl=
function(a){return(new URL(a,this.global.location.href)).href};c.prototype.ready=function(){return this._workerMessaging.ready()};c.prototype.sendToWorker=function(a){this._workerMessaging.send(c._RENDERING_HINTS_COMMAND,a)};c.prototype.logCount=function(a,b){this._csmLogger.count("RenderingHints:Collect:"+a,b)};c._RENDERING_HINTS_COMMAND="rendering_hints";return c}(),F=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return c(a,b)};return function(a,b){function d(){this.constructor=a}c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();r=function(c){function a(a,d,e,h){a=c.call(this,a,d,e)||this;a.queryRoot=h||document;return a}F(a,c);a.prototype.trigger=function(){var a=this;v.queueTask(function(){if(a.ready()){var b=a.collect();a._send(b)}else a.logCount("NotReady")})};a.prototype._send=function(b){var c=this,e=Object.keys(b).map(function(d){return{nature:a._RENDERING_HINTS_NATURE,
target:d,data:b[d],source:c._getSource()}});this.logCount("Targets",e.length);1>e.length||this.sendToWorker(e)};a.prototype._getSource=function(){return{url:this.global.location.href,pty:q.getPageType(this.global),spty:q.getSubPageType(this.global),rid:q.getRequestId(this.global)}};a._RENDERING_HINTS_NATURE="speculated_navigation_content";return a}(r);var G=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,
b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return c(a,b)};return function(a,b){function d(){this.constructor=a}c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),y=this&&this.__assign||function(){y=Object.assign||function(c){for(var a,b=1,d=arguments.length;b<d;b++){a=arguments[b];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c};return y.apply(this,arguments)},z=function(c){function a(b,d,e,h,f){void 0===h&&(h=!1);void 0===f&&(f=
a.POLLING_FREQUENCY);var g=c.call(this,b,d,e)||this;b.addEventListener(a.UPDATE_NOTIFICATION_EVENT,function(){g.trigger()});h&&v.queueTaskEvery(function(){g.trigger()},f);g.trigger();return g}G(a,c);a.update=function(b){var c=new CustomEvent(a.UPDATE_NOTIFICATION_EVENT,{bubbles:!1,cancelable:!1});b.dispatchEvent(c)};a.prototype.collect=function(){for(var b=this.queryRoot.querySelectorAll(a.QUERY),c={},e=function(d){d=b[d];if(d.classList.contains(a.MARKED_READ))return"continue";var e=y({},d.dataset),
g=e[a.ATTR_TARGET];if(!g)return"continue";var f=h.getAbsoluteUrl(g);d.classList.add(a.MARKED_READ);c[f]=c[f]||{};Object.keys(e).filter(function(b){return!!e[b]&&b!==a.ATTR_QUERY&&b!==a.ATTR_TARGET}).forEach(function(a){c[f][a]=e[a]})},h=this,f=0;f<b.length;f++)e(f);return c};a.prototype.logCount=function(a,d){c.prototype.logCount.call(this,"DDHC:"+a,d)};a.QUERY='[data-lightsaber\x3d"rendering-hints/speculated-navigation-content"]';a.MARKED_READ="ls-marked-read";a.ATTR_QUERY="lightsaber";a.ATTR_TARGET=
"target";a.UPDATE_NOTIFICATION_EVENT="lightsaber:rendering-hints:declarative-dataset:update";a.POLLING_FREQUENCY=3E3;return a}(r),H=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return c(a,b)};return function(a,b){function d(){this.constructor=a}c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),I=function(c){function a(a,
d,e,h,f){var b=c.call(this,a,d,e)||this;if(!f.capabilities.mobile)return b;h.when("Rush","s-web-application-controller").execute(function(c,d){c.on(d.ACTIONS.LOAD_SEARCH_PAGE_COMPLETE,function(){b.trigger();z.update(a)})});b._previouslySeenFaceoutImageTargets={};b._previouslySeenTitleTargets={};b.trigger();return b}H(a,c);a.prototype.collect=function(){var b=this._getFaceoutProductLinkToFaceoutImage(),c=this._getFaceoutProductLinkToProductTitle(),e={};this.mergeInto(e,b,a.HINT_KEY_FACEOUT_IMAGE);
this.mergeInto(e,c,a.HINT_KEY_PRODUCT_TITLE);return e};a.prototype.logCount=function(a,d){c.prototype.logCount.call(this,"SPHC:"+a,d)};a.prototype._getFaceoutProductLinkToFaceoutImage=function(){for(var b=this.queryRoot.querySelectorAll(a.FACEOUT_IMAGE_QUERY),c={},e=0;e<b.length;e++){var h=b[e],f=h.closest("a");f&&(f=f.href,this._previouslySeenFaceoutImageTargets[f]||(this._previouslySeenFaceoutImageTargets[f]=!0,c[f]=h.src))}this.logCount("Query:FaceoutImage",Object.keys(c).length);return c};a.prototype._getFaceoutProductLinkToProductTitle=
function(){for(var b=this.queryRoot.querySelectorAll(a.FACEOUT_TITLE_QUERY),c={},e=0;e<b.length;e++){var h=b[e],f=h.closest("a");f&&(f=f.href,this._previouslySeenTitleTargets[f]||(this._previouslySeenTitleTargets[f]=!0,(h=h.textContent)&&(c[f]=h)))}this.logCount("Query:Title",Object.keys(c).length);return c};a.FACEOUT_IMAGE_QUERY='a.s-faceout-link[title\x3d"product-image"] img.s-image[data-image-latency\x3d"s-product-image"]';a.FACEOUT_TITLE_QUERY='a.s-faceout-link[title\x3d"product-detail"] h2';
a.HINT_KEY_FACEOUT_IMAGE="faceoutImage";a.HINT_KEY_PRODUCT_TITLE="productTitle";return a}(r);r=function(){function c(a,b,c,e){var d=this;this.global=a;this.csmLogger=b;this.P=c;this.A=e;"complete"===a.document.readyState?this.survey():a.addEventListener("load",function(){d.survey()})}c.prototype.getResourceTimingRecords=function(a){var b=this.global.performance.getEntriesByType("resource");return"function"===typeof a?b.filter(a):b};c.prototype.getServerTimingRecords=function(){var a=this.global.performance.getEntriesByType("navigation")[0];
return a&&a.serverTiming?a.serverTiming.filter(function(a){return a.name===c._SERVER_TIMING_NAME}).map(function(a){if(a.description)try{return JSON.parse(decodeURIComponent(a.description))}catch(d){}}).filter(function(a){return!!a}):[]};c.prototype.getEpochForPerformanceTimeline=function(a){return Math.round(this.global.performance.timeOrigin+a)};c.prototype.logTag=function(a){this.csmLogger.tag(this._getMetricName(a))};c.prototype.logWidgetLatency=function(a,b,c){b=this._getMetricName(b);this.csmLogger.widgetLatency(a,
b,c)};c.prototype._getMetricName=function(a){return"RenderingHints:Survey:"+a};c._SERVER_TIMING_NAME="lightsaber";return c}();var J=this&&this.__extends||function(){var c=function(a,b){c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return c(a,b)};return function(a,b){function d(){this.constructor=a}c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}(),K=function(c){function a(){return null!==
c&&c.apply(this,arguments)||this}J(a,c);a.prototype.survey=function(){var a=this._getLandingImageUrl();if(a){this._logLatency("Landing",a);var c=this._getPreloadedUrlRecord();c?(this._logLatency("Preload",c.href),this._logMatch(a,c.href,c.attribution)):this._logTag("HintNotFound")}else this._logTag("NoLandingImage")};a.prototype._getLandingImageUrl=function(){var b=this.A.state(this.A.capabilities.mobile?a._MOBILE_PAGE_STATE:a._DESKTOP_PAGE_STATE);return b&&b.landingImageUrl?b.landingImageUrl:l};
a.prototype._getPreloadedUrlRecord=function(){var b=this.getServerTimingRecords().filter(function(b){return b.role===a._RECORD_ROLE&&b.purpose===a._RECORD_PURPOSE&&b.as===a._RECORD_AS});return 0<b.length?b[0]:l};a.prototype._logMatch=function(a,c,e){a=this._hitOrMiss(c===a);this._logTag(a);e&&this._logTag(a+":"+e)};a.prototype._logLatency=function(b,c){var e=this,d=this.getResourceTimingRecords(function(a){return a.name===c})[0];if(d){var f=d.transferSize,g={cf:d.startTime,bb:d.fetchStart,af:d.requestStart,
be:d.responseStart,ld:d.responseEnd},k=a._METRIC_PREFIX+":"+b;Object.keys(g).forEach(function(a){var b=e.getEpochForPerformanceTimeline(g[a]);e.logWidgetLatency(a,k,b)});d=this._hitOrMiss(0===f);this._logTag("Cache:"+b+":"+d)}};a.prototype._logTag=function(b){this.logTag(a._METRIC_PREFIX+":"+b)};a.prototype._hitOrMiss=function(a){return a?"Hit":"Miss"};a._RECORD_ROLE="rendering-hints/preload";a._RECORD_PURPOSE="detail-landing-image";a._RECORD_AS="image";a._METRIC_PREFIX="DetailLandingImagePreload";
a._MOBILE_PAGE_STATE="mobile-landing-image-data";a._DESKTOP_PAGE_STATE="desktop-landing-image-data";return a}(r),L=function(){function c(a,b,c,e,h){this._global=a;this._P=b;this._A=c;this._workerMessaging=e;this._csmLogger=h}c.prototype.start=function(){switch(q.getPageTypeGroup(this._global)){case "Search":new z(this._global,this._workerMessaging,this._csmLogger);new I(this._global,this._workerMessaging,this._csmLogger,this._P,this._A);break;case "Detail":new z(this._global,this._workerMessaging,
this._csmLogger),new K(this._global,this._csmLogger,this._P,this._A)}};return c}();(function(){function c(a){this._hit=!(!a.$Lightsaber||!a.$Lightsaber.hit);try{var b=a.$Lightsaber&&a.$Lightsaber.meta?k.deep(a.$Lightsaber.meta):l;this._meta=this._isValid(b)?b:l}catch(d){this._meta=l}}c.prototype.isHit=function(){return this._hit};c.prototype.getMeta=function(){return this._meta};c.prototype._isValid=function(a){var b=p.isObject,c=p.isNonEmptyString,e=p.isPositiveInteger;return!!(a&&b(a)&&e(a.fetchEventTimeOrigin)&&
c(a.navigationRule)&&b(a.responseStrategy)&&c(a.responseStrategy.name)&&b(a.clientLib)&&c(a.clientLib.version))};return c})();var M=function(){function c(a){this._global=a}c.prototype.send=function(a,b){a={feature:c.FEATURE,command:a,options:b};(b=this._getCurrentController())?(u.log("ServiceWorker:PostMessage:",a),b.postMessage(a)):u.log("ServiceWorker:Unavailable:",a)};c.prototype.ready=function(){return!!this._getCurrentController()};c.prototype._getCurrentController=function(){if(this._global&&
this._global.navigator&&this._global.navigator.serviceWorker&&this._global.navigator.serviceWorker.controller&&p.isFunction(this._global.navigator.serviceWorker.controller.postMessage))return this._global.navigator.serviceWorker.controller};c.FEATURE="lightsaber";return c}();m.when("A").execute("lightsaber:page",function(c){var a=new D(n),b=new M(n);m.now().register("lightsaber:page:rendering-metrics",function(){});m.when("ready").register("lightsaber:page:rendering-hints",function(){(new L(n,m,c,
b,a)).start()})})})()});